---
description: e2e 테스트 자동화 도구
---

# Playwright

## E2E test

End To End 는 애플리케이션 흐름을 처음부터 끝까지 테스트하는 것을 의미한다. 이전에 보았던 유닛 테스트나 통합테스트는 e2e 까지 즉, 실제 사용자 시나리오대로 안전한 동작을 한다는 것을 증명할 수 없다. 각각의 모듈에 대해서는 무결성을 증명할 수 있지만, 애플리케이션 동작에 대한 무결성은 증명할 수 없기 때문에 e2e 를 통해 애플리케이션의 안정성을 테스트해야 한다.

🧐 e2e 도입 시 해결해야할 과제는 무엇일까?

1\) 테스트 시나리오! (e2e 가 유의미한 테스트가 되기 위해서)

e2e 테스트에서 중요한 부분이 `테스트를 위한 시나리오를 어떻게 가져갈 것인가`로 보인다.&#x20;

개발자는 이미 자신의 의도에 맞게 유닛테스트나 통합테스트로 모듈의 검증을 끝낸다. 사실 통합테스트로 어느정도 e2e 테스트를 대체할 수 있기 때문에 e2e 와 통합테스트 사이에서 중복적인 테스트도 발생할 수 있고, 정말 e2e 가 필요한지에 대해 의문점이 들 수도 있을 것 같다.

이 부분이 해소되기 위해서는 e2e 테스트 시나리오는 기획 혹은 QA 팀과의 협업이 필수적인 부분이라 생각된다.&#x20;

2\) ui 기반 테스트!

사용자 시나리오 기반 테스트는 자연스럽게 ui 기반 테스트와 혼돈 될 수 있을거라는 생각이 든다. ui 기반 테스트를 작성하게 되면.. ui 가 변경될 때 마다 테스트가 깨질 수 있기 때문에 이 부분을 잘 풀어가는게 중요할 것 같은데... 이 부분은 코드 설계 방식에 따라 해소할 수 있을 것 같다!

그래서 관심사의 분리가 매우 중요할 것 같다.. -> compound components 기법 활용하기

## Headless Chrome

Headless 란 웹 브라우저가 GUI 없이 프로그램상으로만 돌리는 것을 의미한다. 크롬에서는 이 헤드리스 모드를 59버전부터 지원한다.

헤드리스 크롬은 CLI(Command Line Interface)형태로 실행하는데 눈에 보이는 UI가 필요없는 테스트 자동화 등에 많이 쓰인다.

* 장점
  * 직접 브라우저 랜딩을 하지 않기 때문에 속도가 더 빠름
  * 자꾸 브라우저가 켜졌다/꺼졌다 하지 않기 때문에 헤드리스로 실행 후 다른 작업을 방해받지 않고 할 수 있음
* 단점
  * 눈에 보이지 않기 때문에 디버깅이 어려움. 그러나 플레이웨잇에서는 테스트실패시 test-results 에 오류 발생 화면이 캡쳐되어 저장됨.

## Puppeteer

구글에서 만든 노드 라이브러리로 headless chrome 기반으로 동작한다(헤드리스 모드는 옵션으로 on/off 설정할 수 있음). 웹크롤링 및 UI/UX 자동화 테스트 등을 지원한다.

단점, chromium 만 지원한다.

## Playwright

* Playwright 는 e2e 를 위해 만들어진 도구가 아니지만, e2e 기능을 지원한다.
* Node.js 로 작성되어 있다.
* 모든 브라우저를 지원하기 때문에 croww-browser 자동화 테스트를 작성할 수 있다.
* codegen 을 지원한다. (오.. 이거 짱 좋아 레거시 테스트코드 작성할 때 좋을 것 같다)
  * 자동화 테스트 코드를 생성해주는 도구이다.&#x20;
  * `playwright codegen {테스트 하고자 하는 사이트}` 명령어를 입력하면 playwright inspector 창과 해당 사이트가 뜨게된다. 그 때 테스트하고자하는 행위를 한다면 그 행위 기반으로 자동 코드가 생성된다.
  * 타입스크립트, 자바스트립트, 파이썬 등의 언어를 지원한다.

Cypress 보다 속도가 빠르고 hover 나 dnd (drag and drop) 이벤트도 제공한다. 참고로 cypress 도 headless 옵션을 지원하고 hover 나 dnd 도 plugin 으로 지원한다.

## CodeceptJS

![](<../.gitbook/assets/스크린샷 2023-05-13 오전 11.50.26.png>)

조금 더 인간친화(?)적 테스트 라이브러리로 테스트코드만 보더라도 시나리오가 잘 읽히는 장점이있다.&#x20;

복잡한 테스트이외는 해당 테스트 도구로 커버가능한 스펙이 지원된다.&#x20;

e2e 를 처음 작성해본다면 codeceptjs 를 사용해 시나리오기반 테스트작성에 익숙해지고 좀 더 복잡한 기능을 사용할 수 있는 playwright 로 넘어가도 좋을 것 같다.
